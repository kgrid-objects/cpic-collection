<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"/>
  <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css"/>
  <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css"/>
  <link rel="stylesheet" href="./static/css/ca_style.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <!-- <script src="./static/js/fhir-client.min.js"> </script> -->
  <script src="./static/js/moment.min.js"></script>
  <script src="./static/js/lodash.min.js"></script>
  <script src="https://unpkg.com/vue"></script>
  <script src="//unpkg.com/babel-polyfill@latest/dist/polyfill.min.js"></script>
  <script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://use.fontawesome.com/5f3a58fd6a.js"></script>
  <title>CPIC Kit Demo App</title>
</head>
<body>
  <div id='app' style='position:relative;height:100%;'>
    <b-modal centered size="lg" v-model='settingShow' title='Setting' id="setting" ok-title='Apply Changes' @ok='savesetting'>
      <b-tabs pills>
        <b-tab title='Configure Activator'>
          <b-form-group label="">
               <b-form-radio-group id="radios1" buttons v-model="activatorselection" name="radioOpenions">
                 <b-form-radio value="default">{{options[0].text}}</b-form-radio>
                 <b-form-radio value="local">{{options[1].text}}</b-form-radio>
                 <b-form-radio value="custom">{{options[2].text}}</b-form-radio>
               </b-form-radio-group>
               <div class='urlinput'>
                 <span v-if='activatorselection=="default"'>{{options[0].url}}</span>
                 <span v-if='activatorselection=="local"'>{{options[1].url}}</span>
                 <input v-if='activatorselection=="custom"' type='text' v-model='activatorurl.custom' placeholder='Type in URL for the custom activator starting with http://'/>
               </div>
           </b-form-group>
        </b-tab>
        <b-tab title='Genes - Drugs' style="overflow-y:auto; position: elative;">

          <div class='row' >
          <table class='gene-drug-table' >
            <tbody>
              <tr>
                <th> Gene </th>
                <th> Drug </th>
                <th> CPIC Guideline </th>
                <th> K-GRID KO </th>
              </tr>
              <tr class=" " v-for='item in rawcpiclist'>
                <td class="pad-left10" >{{item.enzyme}}</td>
                <td class="pad-left10" >{{item.drugname}}</td>
                <td class="pad-left10" ><span v-if="item.reflink!=''"><i class="fa fa-check green"></span></td>
                <td class="pad-left10" ><span v-if="item.ko.kolink!=''"><i class="fa fa-check green"></span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div clas='row' style="position:absolute;    bottom: 25px;   padding-left: 300px;">
          <b-form-checkbox id="checkbox1"
                   v-model="demofiltercheck"
                   value="true"
                   style="text-align:right; ">
                   Show only the drugs based on available gene information
                 </b-form-checkbox>
        </div>
        </b-tab>
      </b-tabs>
    </b-modal>
    <header>
      <div class="container color-scheme pad-l-30 header-title">
        <h1>CPIC Kit Demo App
        <i class="fa fa-gear float-r" @click='showsetting'></i></h1>
      </div>
    </header>
    <div class="container">
      <div class="row gene-row">
        <div class="col-md-4 pad-l-0 pad-r-0">
          <div class="ht-g input_div">
            <div class=" box-header color-scheme">

              <div class="row">
                <div class="col-md-5 col-sm-7" style="line-height:3em;"><span> Autofill Sample</span></div>
                <div class="col-md-7 col-sm-7">
                  <div class="radio-group">
                    <input type="radio" id="option-zero" value="0" name="patient" v-model='autofillSelection'> <label for="option-zero">0</label>
                    <input type="radio" id="option-one" value="1" name="patient" v-model='autofillSelection'> <label for="option-one">1</label>
                    <input type="radio" id="option-two" value="2"  name="patient" v-model='autofillSelection'> <label for="option-two">2</label>
                    <input type="radio" id="option-three" value="3" name="patient" v-model='autofillSelection'> <label for="option-three">3</label>
                    <input type="radio" id="option-four" value="4" name="patient" v-model='autofillSelection'> <label for="option-four">4</label>
                  </div>
                </div>
              </div>
            </div>
            <table class='gene-table' @click='waitforinput'>
              <tbody>
                <tr style='text-align:center;'>
                  <th>Gene</th>
                  <th>Diplotype</th>
                  <th>Phenotype</th>
                </tr>
                <tr class=" " v-for='(value, key) in diplotypePanel'>
                    <td :class="{active:value!=''}">{{key}} </td>
                    <td :class="{active:value!=''}"> <b-form-input  type="text" v-model='diplotypePanel[key]'>  </td>
                    <td class='pheno' style='width:50%;font-size:85%;text-align:center;' :class="{active:value!=''}">{{phenotypePanel[key]}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="col-md-8 col-sm-8 clear-fix  viewtop ht-d"  :class='{dimon:flipped.rec}'>
            <div class="row ht-d dim" :class='{shown:flipped.rec}'>
              <div class="col-md-12 col-sm-12 col-xs-12 visual-field text-center ht-d" v-if='!(isInit|hasError.rec|hasError.cpic|hasError.kgrid)'>
                <div class="flip-container" :class='{hover:flipped.rec}' >
                  <div class='flipper'>
                    <div class='front'>
                      <div class=' row tab-title'>
                        <div class='col-md-1 col-sm-1 col-xs-1'></div>
                        <div class='col-md-10 col-sm-10 col-xs-10'> <h4>CPIC Recommendations <span v-if='selecteddrugname!=null'>for {{selecteddrugname}} </span></h4> </div>
                        <div class='col-md-1 col-sm-1 col-xs-1'></div>
                      </div>
                      <div class="tab-pane active">
                        <div id="stent-gage">
                          <ul id="reclist" style="list-style:none; width: 100%;overflow-y:auto;text-align:left;font-size: 18px;padding:0;margin:0;">
                            <li v-for='(value, key, index) in recommendationlist' ><recomtile :recmodel='value' :reckey='key' :recindex='index'></recomtile></li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

    </div>
  </div>
  <div class="container">
    <div class="row statussec">
      <b-btn v-b-toggle.collapsestatus > CPIC Demo APP LOG  <span style='margin-left:20px;font-weight:400;'> {{currentstatus}} </span> </b-btn>
      <b-collapse id="collapsestatus">
        <div id='statuslog'>
          <ul id='eventlog' style='list-style:none;'>
            <li v-for='entry in eventlog' :class='entry.key'>{{entry.timestamp}} <span>{{entry.text}}</span> </li>
          </ul>
        </div>
      </b-collapse>
    </div>
  </div>
  <footer class="container-fluid container-car color-scheme text-center">
    <p>University of Michigan Medical School 2018</p>
  </footer>
</div>
<template id='recomtile-template'>
		<div v-bind:id="recindex">
				<div class="row kg-sub">
					<div class="col-md-11 col-sm-11 col-xs-11 kgl-title kg-fg-color" data-toggle="tooltip"
							data-placement="top" v-bind:title="recmodel.status"><span>{{reckey}}</span>
					</div>
				</div>
				<div class="row kg-rec pad-top10">
					<div class="col-md-12 col-sm-12 col-xs-12 kg-rec ft-sz-20">{{recommendation}}</div>
				</div>
			</div>
	</template>
</body>
<script src="./static/js/cpic.js"> </script>
</html>
